---
title: "Docker 이미지와 컨테이너의 차이 및 주요 개념"
date: 2024-12-04
categories: [Docker, DevOps]
tags: Docker 이미지 컨테이너 DevOps
---

## 이미지와 컨테이너의 차이

### 이미지 (Image)
- **정의**: 애플리케이션 실행에 필요한 파일, 라이브러리, 설정 등을 포함한 **불변(Immutable)** 상태의 템플릿.
- **특징**:
  - 읽기 전용(Read-only).
  - 컨테이너 실행을 위한 청사진 역할.
  - Dockerfile을 기반으로 빌드하여 생성.
  - 변경하려면 이미지를 재빌드해야 함.

#### 비유
이미지는 **소프트웨어 설치 디스크**와 같습니다. 실행은 하지 않지만, 실행할 준비가 되어 있는 상태입니다.

#### 주요 명령어
- **이미지 생성**
  ```bash
  docker build -t [이미지 이름] .
  ```
- **이미지 목록 보기**
  ```bash
  docker images
  ```

---

### 컨테이너 (Container)
- **정의**: 이미지를 실행한 결과로 만들어진 **실행 가능한 독립적 환경**.
- **특징**:
  - 읽기/쓰기 가능(Read/Write).
  - 애플리케이션 실행 상태를 유지.
  - 이미지를 기반으로 하며, 실행 중 설정을 변경 가능.
  - 컨테이너는 임시적이며, 종료되면 삭제될 수 있음(영구 저장은 볼륨 사용).

#### 비유
컨테이너는 **실행 중인 소프트웨어**입니다. 이미지를 설치해서 실제 작동하는 상태라고 보면 됩니다.

#### 주요 명령어
- **컨테이너 실행**
  ```bash
  docker run [옵션] [이미지 이름]
  ```
- **실행 중인 컨테이너 목록**
  ```bash
  docker ps
  ```
- **중지된 컨테이너 포함 목록**
  ```bash
  docker ps -a
  ```
- **컨테이너 중지**
  ```bash
  docker stop [컨테이너 ID]
  ```
- **컨테이너 삭제**
  ```bash
  docker rm [컨테이너 ID]
  ```

---

## Docker의 주요 개념

### Dockerfile
- **정의**: 이미지를 생성하기 위한 설정 파일.
- **내용**:
  - 애플리케이션 환경, 필요한 파일, 설치 명령 등을 정의.
- **중요 명령**:
  - `FROM`: 베이스 이미지 지정.
  - `WORKDIR`: 컨테이너 작업 디렉토리 설정.
  - `RUN`: 이미지 생성 중 실행할 명령어.
  - `COPY`: 호스트 파일을 컨테이너로 복사.
  - `CMD`: 컨테이너 시작 시 실행할 기본 명령.

---

### Docker 볼륨 (Volume)
- **정의**: 컨테이너가 데이터를 영구적으로 저장할 수 있는 방법.
- **특징**:
  - 컨테이너 종료 또는 삭제 후에도 데이터 유지.
  - 호스트와 컨테이너 간 데이터 공유 가능.

#### 주요 명령어
- **볼륨 생성**
  ```bash
  docker volume create [볼륨 이름]
  ```
- **볼륨 마운트**
  ```bash
  docker run -v [볼륨 이름]:[컨테이너 경로] [이미지 이름]
  ```

---

### Docker 네트워크
- **정의**: 컨테이너 간 통신 또는 컨테이너와 외부 간 통신 설정.
- **종류**:
  - **Bridge**: 기본 네트워크, 컨테이너끼리 통신 가능.
  - **Host**: 컨테이너가 호스트 네트워크를 공유.
  - **None**: 네트워크 비활성화.

#### 주요 명령어
- **네트워크 목록**
  ```bash
  docker network ls
  ```
- **네트워크 생성**
  ```bash
  docker network create [네트워크 이름]
  ```

---

### Docker Compose
- **정의**: 여러 컨테이너를 한 번에 관리하기 위한 도구.
- **사용 파일**: `docker-compose.yml`
- **특징**:
  - 여러 컨테이너를 정의하고 실행할 수 있음.
  - 네트워크, 볼륨 등의 설정 포함 가능.

#### 주요 명령어
- **실행**
  ```bash
  docker-compose up
  ```
- **중지**
  ```bash
  docker-compose down
  ```

---

## 이미지와 컨테이너의 관계 및 이유

### 이미지와 컨테이너를 분리 관리해야 하는 이유
1. **재사용성**
   - 동일 이미지를 기반으로 여러 컨테이너 실행 가능.
   - 한 번 빌드한 이미지를 여러 환경에서 사용 가능.

2. **독립성**
   - 이미지 수정 없이 컨테이너 설정 변경 가능.
   - 컨테이너가 중단되더라도 이미지는 변경되지 않음.

3. **배포 편의성**
   - 이미지를 빌드하여 배포하면, 어디서든 동일 환경 유지 가능.

---

## 일반적인 작업 흐름

1. **Dockerfile 작성**
   - 이미지 생성 규칙 정의.
2. **이미지 빌드**
   ```bash
   docker build -t [이미지 이름] .
   ```
3. **컨테이너 실행**
   ```bash
   docker run -p [호스트 포트]:[컨테이너 포트] [이미지 이름]
   ```
4. **컨테이너 관리**
   - 중지:
     ```bash
     docker stop [컨테이너 ID]
     ```
   - 삭제:
     ```bash
     docker rm [컨테이너 ID]
     ```
5. **볼륨과 네트워크 설정** (필요 시)
   - 영구 데이터 저장 및 컨테이너 간 통신 설정.

---
